@page
@model FamilyPromiseApp.Pages.Persons.CreateModel
@using FamilyPromiseApp.Models

 
 @* Initial Contact Form *@

@{
    ViewData["Title"] = "Create";
    var ChildrenList = Model.Children;
}


<script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
 
<h4>Client Contact</h4>
<hr />
<div class="row">
    <div class="col-md-4">
        <form method="post">
            <div class="Form-Section">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <label asp-for="Person.LastName" class="control-label"></label>
                <input asp-for="Person.LastName" class="form-control" />
                <span asp-validation-for="Person.LastName" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Person.FirstMidName" class="control-label"></label>
                <input asp-for="Person.FirstMidName" class="form-control" />
                <span asp-validation-for="Person.FirstMidName" class="text-danger"></span>
            </div>

            @{
                var defaultDateOfBirth = DateTime.Today.AddYears(-30).ToString("yyyy-MM-dd");
             }

            <div class="form-group">
                <label asp-for="Person.DateOfBirth" class="control-label"></label>
                <input asp-for="Person.DateOfBirth" class="form-control" type="date" value="@defaultDateOfBirth" />
                <span asp-validation-for="Person.DateOfBirth" class="text-danger"></span>
            </div>
                        <div class="form-group">
                <label asp-for="Person.CellPhone" class="control-label"></label>
                <input asp-for="Person.CellPhone" class="form-control" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="###-###-####" required />
                <span asp-validation-for="Person.CellPhone" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Person.WorkPhone" class="control-label"></label>
                <input asp-for="Person.WorkPhone" class="form-control" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" placeholder="###-###-####" required />
                <span asp-validation-for="Person.WorkPhone" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Person.Email" class="control-label"></label>
                <input asp-for="Person.Email" class="form-control" />
                <span asp-validation-for="Person.Email" class="text-danger"></span>
            </div>
             <div class="col-md-12">
             </div>
            </div>
             <div class="Form-Section">
                <h4>Additional Adults Information</h4>
                <hr />
            <div class="form-group">
                <label asp-for="Person.HouseHoldMemberExist" for="houseHoldMemberExistDropdown" class="control-label"></label>
                    @Html.DropDownListFor(model => model.Person.HouseHoldMemberExist,
                          new SelectList(Enum.GetValues(typeof(Models.AnyHouseHold))),
                          new { @class = "form-select", id = "houseHoldMemberExistDropdown", value = "Yes" })
                <span asp-validation-for="Person.HouseHoldMemberExist" class="text-danger"></span>
            </div>
 
            <div class="form-group houseHoldSection" id="houseHoldNum">
                <label asp-for="Person.HouseHoldNum" class="control-label"></label>
                <input asp-for="Person.HouseHoldNum" class="form-control" type="number" min="1" value="1" oninput="validity.valid||(value='1');" />
                <span asp-validation-for="Person.HouseHoldNum" class="text-danger"></span>
            </div>
            <br class="form-group houseHoldSection">
            <b class="form-group houseHoldSection">Adult 1 Information</b>
            <div class="form-group houseHoldSection">
                <label asp-for="Person.AdultName" class="control-label"></label>
                <input asp-for="Person.AdultName" class="form-control" />
                <span asp-validation-for="Person.AdultName" class="text-danger"></span>
            </div>
 
            <div class="form-group houseHoldSection">
                <label asp-for="Person.AdultDateOfBirth" class="control-label"></label>
                <input asp-for="Person.AdultDateOfBirth" class="form-control" value="@defaultDateOfBirth"/>
                <span asp-validation-for="Person.AdultDateOfBirth" class="text-danger"></span>
            </div>
            <div class="form-group houseHoldSection">
                <label asp-for="Person.AdultCellPhone" class="control-label"></label>
                <input asp-for="Person.AdultCellPhone" class="form-control" />
                <span asp-validation-for="Person.AdultCellPhone" class="text-danger"></span>
            </div>
             <div class="form-group houseHoldSection">
                <label asp-for="Person.AdultWorkPhone" class="control-label"></label>
                <input asp-for="Person.AdultWorkPhone" class="form-control" />
                <span asp-validation-for="Person.AdultWorkPhone" class="text-danger"></span>
            </div>
            <div class="form-group houseHoldSection">
                <label asp-for="Person.AdultEmail" class="control-label"></label>
                <input asp-for="Person.AdultEmail" class="form-control" />
                <span asp-validation-for="Person.AdultEmail" class="text-danger"></span>
            </div>
             </div>
            <!-- Placeholder div for autogenerated sections-->
            <div id="additionalAdults"></div>
            <div class="col-md-12">
                <div class="Form-Section">
                    <div id="AllChildren">
                        <h4>Children Information</h4>
                        <hr />
                        
                            <div class="form-group">
                                <label asp-for="Person.HouseHoldChildrenExist" class="control-label" for="childExistDropdown"></label>
                                @Html.DropDownListFor(model => model.Person.HouseHoldChildrenExist,
                                                    new SelectList(Enum.GetValues(typeof(Models.AnyChildren))),
                                                    new { @class = "form-select", id = "childExistDropdown", value = "Yes"})
                                <span asp-validation-for="Person.HouseHoldChildrenExist" class="text-danger"></span>
                            </div>
                        <!--When you select a number of children, print the number to the console-->
                            <div class="form-group childSection" id="numChild">
                                <label asp-for="Person.ChildNum" class="control-label" for="numChild"></label>
                                <input asp-for="Person.ChildNum" id="numChild"class="form-control" type="number" min="1" max="11" value="1" oninput="validity.valid||(value='1');" onchange="onNumChildrenSelected()" />
                                <span asp-validation-for="Person.ChildNum" class="text-danger"></span>
                            </div>
                            <!--Holds an arbitrary number of children-->
                            <div id="ChildrenEntry">
                                <!-- Template for a specific child-->
                                <div id="Child_1">
                                    <br class="form-group childSection">
                                    <b class="form-group childSection">Child 1 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[1].LastName" class="control-label"></label>
                                        <input asp-for="Children[1].LastName" class="form-control" />
                                        <span asp-validation-for="Children[1].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[1].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[1].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[1].FirstMidName" class="text-danger"></span>
                                    </div>
                                    @{
                                        var defaultChildDateOfBirth = DateTime.Today.AddYears(-10).ToString("yyyy-MM-dd");
                                    }

                                    <div class="form-group childSection">
                                        <label asp-for="Children[1].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[1].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[1].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                <div id="Child_2">
                                    <br class="form-group childSection">
                                    <b class="form-group childSection">Child 2 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[2].LastName" class="control-label"></label>
                                        <input asp-for="Children[2].LastName" class="form-control" />
                                        <span asp-validation-for="Children[2].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[2].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[2].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[2].FirstMidName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[2].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[2].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[2].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                <div id="Child_3">
                                    <br class="form-group childSection">
                                    <b class="form-group childSection">Child 3 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[3].LastName" class="control-label"></label>
                                        <input asp-for="Children[3].LastName" class="form-control" />
                                        <span asp-validation-for="Children[3].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[3].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[3].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[3].FirstMidName" class="text-danger"></span>
                                    </div>

                                    <div class="form-group childSection">
                                        <label asp-for="Children[3].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[3].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[3].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                <div id="Child_4">
                                    <br class="form-group childSection">
                                    <b class="form-group childSection">Child 4 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[4].LastName" class="control-label"></label>
                                        <input asp-for="Children[4].LastName" class="form-control" />
                                        <span asp-validation-for="Children[4].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[4].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[4].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[4].FirstMidName" class="text-danger"></span>
                                    </div>

                                    <div class="form-group childSection">
                                        <label asp-for="Children[4].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[4].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[4].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                <div id="Child_5">
                                    <br class="form-group childSection">
                                    <b class="form-group childSection">Child 5 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[5].LastName" class="control-label"></label>
                                        <input asp-for="Children[5].LastName" class="form-control" />
                                        <span asp-validation-for="Children[5].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[5].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[5].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[5].FirstMidName" class="text-danger"></span>
                                    </div>
                                    

                                    <div class="form-group childSection">
                                        <label asp-for="Children[5].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[5].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[5].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                <div id="Child_6"><br class="form-group childSection">
                                    <b class="form-group childSection">Child 6 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[6].LastName" class="control-label"></label>
                                        <input asp-for="Children[6].LastName" class="form-control" />
                                        <span asp-validation-for="Children[6].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[6].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[6].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[6].FirstMidName" class="text-danger"></span>
                                    </div>

                                    <div class="form-group childSection">
                                        <label asp-for="Children[6].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[6].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[6].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                <div id="Child_7">
                                    <br class="form-group childSection">
                                    <b class="form-group childSection">Child 7 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[7].LastName" class="control-label"></label>
                                        <input asp-for="Children[7].LastName" class="form-control" />
                                        <span asp-validation-for="Children[7].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[7].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[7].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[7].FirstMidName" class="text-danger"></span>
                                    </div>

                                    <div class="form-group childSection">
                                        <label asp-for="Children[7].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[7].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[7].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                <div id="Child_8"><br class="form-group childSection">
                                    <b class="form-group childSection">Child 8 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[8].LastName" class="control-label"></label>
                                        <input asp-for="Children[8].LastName" class="form-control" />
                                        <span asp-validation-for="Children[8].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[8].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[8].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[8].FirstMidName" class="text-danger"></span>
                                    </div>

                                    <div class="form-group childSection">
                                        <label asp-for="Children[8].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[8].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[8].DateOfBirth" class="text-danger"></span>
                                    </div></div>
                                <div id="Child_9"><br class="form-group childSection">
                                    <b class="form-group childSection">Child 9 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[9].LastName" class="control-label"></label>
                                        <input asp-for="Children[9].LastName" class="form-control" />
                                        <span asp-validation-for="Children[9].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[9].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[9].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[9].FirstMidName" class="text-danger"></span>
                                    </div>

                                    <div class="form-group childSection">
                                        <label asp-for="Children[9].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[9].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[9].DateOfBirth" class="text-danger"></span>
                                    </div></div>
                                <div id="Child_10">
                                    <br class="form-group childSection">
                                    <b class="form-group childSection">Child 10 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[10].LastName" class="control-label"></label>
                                        <input asp-for="Children[10].LastName" class="form-control" />
                                        <span asp-validation-for="Children[10].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[10].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[10].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[10].FirstMidName" class="text-danger"></span>
                                    </div>
                                    

                                    <div class="form-group childSection">
                                        <label asp-for="Children[10].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[10].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[10].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                <div id="Child_11">
                                    <br class="form-group childSection">
                                    <b class="form-group childSection">Child 11 Information</b>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[11].LastName" class="control-label"></label>
                                        <input asp-for="Children[11].LastName" class="form-control" />
                                        <span asp-validation-for="Children[11].LastName" class="text-danger"></span>
                                    </div>
                                    <div class="form-group childSection">
                                        <label asp-for="Children[11].FirstMidName" class="control-label"></label>
                                        <input asp-for="Children[11].FirstMidName" class="form-control" />
                                        <span asp-validation-for="Children[11].FirstMidName" class="text-danger"></span>
                                    </div>
                                    

                                    <div class="form-group childSection">
                                        <label asp-for="Children[11].DateOfBirth" class="control-label"></label>
                                        <input asp-for="Children[11].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                        <span asp-validation-for="Children[11].DateOfBirth" class="text-danger"></span>
                                    </div>
                                </div>
                                
                            </div>


                            @* <br class="form-group childSection">
                            <b class="form-group childSection">Child 2 Information</b>
                            <div class="form-group childSection">
                                <label asp-for="Children[2].LastName" class="control-label"></label>
                                <input asp-for="Children[2].LastName" class="form-control" />
                                <span asp-validation-for="Children[2].LastName" class="text-danger"></span>
                            </div>
                            <div class="form-group childSection">
                                <label asp-for="Children[2].FirstMidName" class="control-label"></label>
                                <input asp-for="Children[2].FirstMidName" class="form-control" />
                                <span asp-validation-for="Children[2].FirstMidName" class="text-danger"></span>
                            </div>
                        

                            <div class="form-group childSection">
                                <label asp-for="Children[2].DateOfBirth" class="control-label"></label>
                                <input asp-for="Children[2].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                <span asp-validation-for="Children[2].DateOfBirth" class="text-danger"></span>
                            </div>
                            <br class="form-group childSection">
                            <b class="form-group childSection">Child 3 Information</b>
                            <div class="form-group childSection">
                                <label asp-for="Children[3].LastName" class="control-label"></label>
                                <input asp-for="Children[3].LastName" class="form-control" />
                                <span asp-validation-for="Children[3].LastName" class="text-danger"></span>
                            </div>
                            <div class="form-group childSection">
                                <label asp-for="Children[3].FirstMidName" class="control-label"></label>
                                <input asp-for="Children[3].FirstMidName" class="form-control" />
                                <span asp-validation-for="Children[3].FirstMidName" class="text-danger"></span>
                            </div>
                            <div class="form-group childSection">
                                <label asp-for="Children[3].DateOfBirth" class="control-label"></label>
                                <input asp-for="Children[3].DateOfBirth" class="form-control" type="date" value="@defaultChildDateOfBirth" />
                                <span asp-validation-for="Children[3].DateOfBirth" class="text-danger"></span>
                            </div> *@

            <!-- Placeholder div for autogenerated sections-->
                            <div id="additionalChildren"></div>
 
                            <div class="col-md-12">
                            </div>
                        </div>
                    </div> 
                <div class="Form-Section">
            <h4>Case Information</h4>
            <hr />
            
             <div class="form-group">
                <label asp-for="Case.Date" class="control-label"></label>
                <input asp-for="Case.Date" class="form-control" />
                <span asp-validation-for="Case.Date" class="text-danger"></span>
            </div>
             <div class="form-group">
                <label asp-for="Case.Time" class="control-label"></label>
                <input asp-for="Case.Time" class="form-control" />
                <span asp-validation-for="Case.Time" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Case.TakenBy" class="control-label"></label>
                <input asp-for="Case.TakenBy" class="form-control" />
                <span asp-validation-for="Case.TakenBy" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Case.ReferringAgency" class="control-label"></label>
                <input asp-for="Case.ReferringAgency" class="form-control" />
                <span asp-validation-for="Case.ReferringAgency" class="text-danger"></span>
            </div>
 
            <div class="col-md-12">
            </div>
            </div>
            <div class="Form-Section">
                
                <h4>Current Living Situation</h4>
                <hr />
             <div class="form-group">
                <label asp-for="Case.CurrentSituation" class="control-label"></label>
                <input asp-for="Case.CurrentSituation" class="form-control" />
                <span asp-validation-for="Case.CurrentSituation" class="text-danger"></span>
            </div>

            <div class="form-group">
                <label asp-for="Case.IsHoused" class="control-label"></label>
                <input asp-for="Case.IsHoused" class="form-control" />
                <span asp-validation-for="Case.IsHoused" class="text-danger"></span>
            </div>
             <div class="form-group">
                <label asp-for="Case.IsEmployed" class="control-label">Employment Status</label>
                <select asp-for="Case.IsEmployed" class="form-control">
        <option value="">Select Employment Status</option>
        @foreach (Employment value in Enum.GetValues(typeof(Employment)))
        {
            <option value="@value">@Enum.GetName(typeof(Employment), value)</option>
        }
    </select>
                <span asp-validation-for="Case.IsEmployed" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Case.income" class="control-label">Income per Month</label>
                <input asp-for="Case.income" class="form-control" />
                <span asp-validation-for="Case.income" class="text-danger"></span>
            </div>
            <!--Make Transport Method a dropdown-->
            <div class="form-group">
                <label asp-for="Case.TransportMethod" class="control-label">Transportation Method</label>
                <select asp-for="Case.TransportMethod" class="form-control">
        <option value="">Select Transportation Method</option>
        @foreach (TransportationMethod value in Enum.GetValues(typeof(TransportationMethod)))
        {
            <option value="@value">@Enum.GetName(typeof(TransportationMethod), value)</option>
        }
    </select>
                <span asp-validation-for="Case.TransportMethod" class="text-danger"></span>
            </div>
            <!--Make Substance a dropdown-->
            <div class="form-group">
                <label asp-for="Case.Substance" class="control-label">Substance Abuse</label>
                <select asp-for="Case.Substance" class="form-control">
        <option value="">Select Substance Abuse</option>
        @foreach (Substance value in Enum.GetValues(typeof(Substance)))
        {
            <option value="@value">@Enum.GetName(typeof(Substance), value)</option>
        }
    </select>
                <span asp-validation-for="Case.Substance" class="text-danger"></span>
            </div>
             <div class="form-group">
                <label asp-for="Case.HealthChallenge" class="control-label"></label>
                <input asp-for="Case.HealthChallenge" class="form-control" />
                <span asp-validation-for="Case.HealthChallenge" class="text-danger"></span>
            </div>
            <!--Make Domestic Violence a dropdown with -->
             <div class="form-group">
                <label asp-for="Case.DomesticViolenceHistory" class="control-label"></label>
                <input asp-for="Case.DomesticViolenceHistory" class="form-control" />
                <span asp-validation-for="Case.DomesticViolenceHistory" class="text-danger"></span>
            </div>
            <div class="form-group">
    <h2>Select Referrals:</h2>
    @if (Model.Person != null && Model.Person.AvailableReferrals != null)
    {
        HashSet<String> uniqueReferralNames = new HashSet<String>();

        foreach (var referral in Model.Person.AvailableReferrals)
        {
            if (!uniqueReferralNames.Contains(referral.Text))
            {
                uniqueReferralNames.Add(referral.Text);
                <div class="form-check">
                    <input type="checkbox" name="SelectedReferralIds" value="@referral.Value" id="@($"Referral_{referral.Value}")" class="form-check-input" />
                    <label class="form-check-label" for="@($"Referral_{referral.Value}")">@referral.Text</label>
                </div>
            }
        }
    }
    else
    {
        <p>Error: AvailableReferrals is not properly initialized.</p>
    }
</div>



            

 
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
            </div>
            </div>

        <script>
    function onNumChildrenSelected() {
        var numChildren = 6;
        @* var numChildren = document.getElementById('numChild').value; *@
        if (numChildren == null) {
            console.log("No number of children selected.");
            return;
        }
        console.log("Number of Children Selected:", numChildren);
        @* if (numChildren != null) {
            console.log("Creating children...");
            numChildren = parseInt(numChildren);
            console.log("Number of Children to Create:", numChildren);
            @Model.numChildren = numChildren;
        } *@

        @* if (numChildren > 1) {
            console.log("Creating children...");
            numChildren = parseInt(numChildren);
            console.log("Number of Children to Create:", numChildren);
            @Model.BuildChildren(4);
            console
        } *@
        // numChildren to int
        @* numChildren = parseInt(numChildren);
        @Model.BuildChildren(4); *@
    }
</script>
           
        <!--Function for hiding forms if no is selected, adds new adults when needed-->
        <script>
            // get a value from a form with id; ChildNum and print it to the console
            @* function printSelectedNumber() {
                var selectedNumber = document.querySelector('#numChild input[type="number"]').value;
                console.log("Selected Number of Children:", selectedNumber);
            }
            function createChildren() {
                var selectedNumber = document.querySelector('#numChild input[type="number"]').value;
                console.log("Selected Number of Children:", selectedNumber);
                @Model.AddChildren(ChildrenList, 4);
            } *@



            // get the value of number of children from Person.ChildNum



            $(document).ready(function () {
                $("#childExistDropdown").change(function () {
                    var selectedValue = $(this).val();
                    $(".childSection").hide();

                    if (selectedValue.toLowerCase() === 'yes') {
                        $(".childSection").show();
                        $(".childSection input").prop("disabled", false);
                        $(".childSection input").prop("required", true);
                    } else {
                        $(".childSection input").prop("disabled", true);
                        $(".childSection input").prop("required", false);
                    }

                });
            });

            $(document).ready(function () {
                $("#houseHoldMemberExistDropdown").change(function () {
                var selectedValue = $(this).val();
                $(".houseHoldSection").hide();
 
                if (selectedValue.toLowerCase() === 'yes') {
                    $(".houseHoldSection").show();
                    $(".houseHoldSection input").prop("disabled", false);
                    $(".houseHoldSection input").prop("required", true);
                } else {
                    $(".houseHoldSection input").prop("disabled", true);
                    $(".houseHoldSection input").prop("required", false);
                }
            });

            
            function generateAdults(numAdults) {
                document.getElementById('additionalAdults').innerHTML = '';
                console.log("Generating adults...");
                for (var i = 2; i <= numAdults; i++) {
                    document.getElementById(`Child_${i}`).innerHTML = '';
                    var sectionHtml = `
                        <b class="form-group houseHoldSection">Adult ${i} Information</b>
                        <div class="form-group houseHoldSection">
                            <label asp-for="Person.AdultName" class="control-label">Adult ${i} Name:</label>
                            <input asp-for="Person.AdultName" class="form-control" />
                            <span asp-validation-for="Person.AdultName" class="text-danger"></span>
                        </div>
                        <div class="form-group houseHoldSection">
                            <label asp-for="Person.AdultDateOfBirth" class="control-label">Adult ${i} Date of Birth:</label>
                            <input asp-for="Person.AdultDateOfBirth" class="form-control" type="date" value="@defaultDateOfBirth" />
                            <span asp-validation-for="Person.AdultDateOfBirth" class="text-danger"></span>
                        </div>
                        <div class="form-group houseHoldSection">
                            <label asp-for="Person.AdultCellPhone" class="control-label">Adult ${i} Cell Phone Number:</label>
                            <input asp-for="Person.AdultCellPhone" class="form-control" />
                            <span asp-validation-for="Person.AdultCellPhone" class="text-danger"></span>
                        </div>
                        <div class="form-group houseHoldSection">
                            <label asp-for="Person.AdultWorkPhone" class="control-label">Adult ${i} Work Phone:</label>
                            <input asp-for="Person.AdultWorkPhone" class="form-control" />
                            <span asp-validation-for="Person.AdultWorkPhone" class="text-danger"></span>
                        </div>
                        <div class="form-group houseHoldSection">
                            <label asp-for="Person.AdultEmail" class="control-label">Adult ${i} Email Address:</label>
                            <input asp-for="Person.AdultEmail" class="form-control" />
                            <span asp-validation-for="Person.AdultEmail" class="text-danger"></span>
                        </div>`;
                    console.log("I " +i);
                    console.log("Number of Adults " +numAdults);
                    document.getElementById('additionalAdults').insertAdjacentHTML('beforeend', sectionHtml);
                }
            }
 
            $('#houseHoldNum input').on('input', function () {
                var enteredNum = parseInt($(this).val(), 10) || 1;
                console.log("Entered Number: " + enteredNum);
                generateAdults(enteredNum);
            });
            generateAdults(document.querySelector('#houseHoldNum input').value);




        @* function generateChildren(numChild) {
                console.log("Generating children...");
                for (var i = 2; i <= numChild; i++) {
                    document.getElementById(`Child_${i}`).innerHTML = '';
                    var sectionHtml = `
                        <br class="form-group childSection">
                        <b class="form-group childSection">Child ${i} Information</b>
                        <div class="form-group childSection">
                            <label asp-for="Children[${i}].LastName" class="control-label"></label>
                            <input asp-for="Children[${i}].LastName" class="form-control" />
                            <span asp-validation-for="Children[${i}].LastName" class="text-danger"></span>
                        </div>
                        <div class="form-group childSection">
                            <label asp-for="Children[${i}].FirstMidName" class="control-label"></label>
                            <input asp-for="Children[${i}].FirstMidName" class="form-control" />
                            <span asp-validation-for="Children[${i}].FirstMidName" class="text-danger"></span>
                        </div>
                        <div class="form-group childSection">
                            <label asp-for="Children[${i}].DateOfBirth" class="control-label"></label>
                            <input asp-for="Children[${i}].DateOfBirth" class="form-control" type="date" />
                            <span asp-validation-for="Children[${i}].DateOfBirth" class="text-danger"></span>
                        </div>`;
                    document.getElementById(`Child_${i}`).insertAdjacentHTML('beforeend', sectionHtml);
                    console.log("I " +i);
                    console.log("Number of Children " +numChild);
                }
            } *@
 
            $('#numChild input').on('input', function () {
                var enteredNum = parseInt($(this).val(), 10) || 1;
                console.log("Entered Number: " + enteredNum);
                generateChildren(enteredNum);
            });
            generateChildren(document.querySelector('#numChild input').value);
            });
        
        </script>
 
        </form>
    </div>
</div>
 
 
@* <div>
    <a asp-page="Index">Back to List</a>
</div> *@
 
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}